import{aQ as t,b7 as e,aZ as s,b6 as i,bl as n,b2 as o,bd as r,aY as a,b9 as c,ba as h,bg as u,b4 as l,aR as d,bm as f}from"./Du3brXL7.js";function b(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function p(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function g(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function m(t,e){p(t);const s=e.outputLen;if(t.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const y=BigInt(2**32-1),x=BigInt(32);function v(t,e=!1){return e?{h:Number(t&y),l:Number(t>>x&y)}:{h:0|Number(t>>x&y),l:0|Number(t&y)}}function w(t,e=!1){let s=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:o,l:r}=v(t[n],e);[s[n],i[n]]=[o,r]}return[s,i]}const P=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),I=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function B(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!(t instanceof Uint8Array))throw new Error("expected Uint8Array, got "+typeof t);return t}class G{clone(){return this._cloneInto()}}function U(t){const e=e=>t().update(B(e)).digest(),s=t();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>t(),e}const[F,L,k]=[[],[],[]],E=BigInt(0),O=BigInt(1),A=BigInt(2),$=BigInt(7),z=BigInt(256),N=BigInt(113);for(let re=0,ae=O,ce=1,he=0;re<24;re++){[ce,he]=[he,(2*ce+3*he)%5],F.push(2*(5*he+ce)),L.push((re+1)*(re+2)/2%64);let t=E;for(let e=0;e<7;e++)ae=(ae<<O^(ae>>$)*N)%z,ae&A&&(t^=O<<(O<<BigInt(e))-O);k.push(t)}const[R,C]=w(k,!0),H=(t,e,s)=>s>32?((t,e,s)=>e<<s-32|t>>>64-s)(t,e,s):((t,e,s)=>t<<s|e>>>32-s)(t,e,s),V=(t,e,s)=>s>32?((t,e,s)=>t<<s-32|e>>>64-s)
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */(t,e,s):((t,e,s)=>e<<s|t>>>32-s)(t,e,s);class j extends G{constructor(t,e,s,i=!1,n=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=s,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,b(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}keccak(){!function(t,e=24){const s=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let i=0;i<10;i++)s[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const e=(i+8)%10,n=(i+2)%10,o=s[n],r=s[n+1],a=H(o,r,1)^s[e],c=V(o,r,1)^s[e+1];for(let s=0;s<50;s+=10)t[i+s]^=a,t[i+s+1]^=c}let e=t[2],n=t[3];for(let s=0;s<24;s++){const i=L[s],o=H(e,n,i),r=V(e,n,i),a=F[s];e=t[a],n=t[a+1],t[a]=o,t[a+1]=r}for(let i=0;i<50;i+=10){for(let e=0;e<10;e++)s[e]=t[i+e];for(let e=0;e<10;e++)t[i+e]^=~s[(e+2)%10]&s[(e+4)%10]}t[0]^=R[i],t[1]^=C[i]}s.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){g(this);const{blockLen:e,state:s}=this,i=(t=B(t)).length;for(let n=0;n<i;){const o=Math.min(e-this.pos,i-n);for(let e=0;e<o;e++)s[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:s,blockLen:i}=this;t[s]^=e,128&e&&s===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){g(this,!1),p(t),this.finish();const e=this.state,{blockLen:s}=this;for(let i=0,n=t.length;i<n;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,n-i);t.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return b(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(m(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:s,outputLen:i,rounds:n,enableXOF:o}=this;return t||(t=new j(e,s,i,o,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=s,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const T=((t,e,s)=>U((()=>new j(e,t,s))))(1,136,32);function M(s,i){return T(t(s,{strict:!1})?e(s):s)}class S extends s{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}class D extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}set(t,e){return super.set(t,e),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}const _=new D(8192);function K(t,e){if(_.has(`${t}.${e}`))return _.get(`${t}.${e}`);const s=t.substring(2).toLowerCase(),n=M(i(s)),o=s.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&o[i]&&(o[i]=o[i].toUpperCase()),(15&n[i>>1])>=8&&o[i+1]&&(o[i+1]=o[i+1].toUpperCase());const r=`0x${o.join("")}`;return _.set(`${t}.${e}`,r),r}const X=/^0x[a-fA-F0-9]{40}$/,Y=new D(8192);function q(t,e){const{strict:s=!0}=e??{};if(Y.has(t))return Y.get(t);const i=!(!X.test(t)||t.toLowerCase()!==t&&s&&K(t)!==t);return Y.set(t,i),i}function J(t){return`0x${t.reduce(((t,e)=>t+e.replace("0x","")),"")}`}function Q(e,s,i,{strict:n}={}){return t(e,{strict:!1})?tt(e,s,i,{strict:n}):Z(e,s,i,{strict:n})}function W(t,e,s){if(n(t)!==s-e)throw new o({offset:s,position:"end",size:n(t)})}function Z(t,e,s,{strict:i}={}){const n=t.slice(e,s);return i&&W(n,e,s),n}function tt(t,e,s,{strict:i}={}){const n=`0x${t.replace("0x","").slice(2*e,2*s)}`;return i&&W(n,e,s),n}class et extends s{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NegativeOffsetError"})}}class st extends s{constructor({length:t,position:e}){super(`Position \`${e}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PositionOutOfBoundsError"})}}class it extends s{constructor({count:t,limit:e}){super(`Recursive read limit of \`${e}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RecursiveReadLimitExceededError"})}}const nt={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new it({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new st({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new et({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new et({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const s=e??this.position;return this.assertPosition(s+t-1),this.bytes.subarray(s,s+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,255&t),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const s=this.inspectBytes(t);return this.position+=e??t,s},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function ot(t,{recursiveReadLimit:e=8192}={}){const s=Object.create(nt);return s.bytes=t,s.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),s.positionReadCount=new Map,s.recursiveReadLimit=e,s}function rt(t,e="wei"){return r(t,a[e])}function at(t){const e=Object.entries(t).map((([t,e])=>void 0===e||!1===e?null:[t,e])).filter(Boolean),s=e.reduce(((t,[e])=>Math.max(t,e.length)),0);return e.map((([t,e])=>`  ${`${t}:`.padEnd(s+1)}  ${e}`)).join("\n")}class ct extends s{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidLegacyVError"})}}class ht extends s{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",at(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class ut extends s{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStorageKeySizeError"})}}class lt extends s{constructor({cause:t,maxFeePerGas:e}={}){super(`The fee cap (\`maxFeePerGas\`${e?` = ${rt(e)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(lt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class dt extends s{constructor({cause:t,maxPriorityFeePerGas:e,maxFeePerGas:s}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${e?` = ${rt(e)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${s?` = ${rt(s)} gwei`:""}).`].join("\n"),{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}function ft(t,e){return({exclude:s,format:i})=>({exclude:s,format:t=>{const n=e(t);if(s)for(const e of s)delete n[e];return{...n,...i(t)}},type:t})}Object.defineProperty(dt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});const bt={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3"};function pt(t){const e={};return void 0!==t.accessList&&(e.accessList=t.accessList),void 0!==t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes),void 0!==t.blobs&&("string"!=typeof t.blobs[0]?e.blobs=t.blobs.map((t=>c(t))):e.blobs=t.blobs),void 0!==t.data&&(e.data=t.data),void 0!==t.from&&(e.from=t.from),void 0!==t.gas&&(e.gas=h(t.gas)),void 0!==t.gasPrice&&(e.gasPrice=h(t.gasPrice)),void 0!==t.maxFeePerBlobGas&&(e.maxFeePerBlobGas=h(t.maxFeePerBlobGas)),void 0!==t.maxFeePerGas&&(e.maxFeePerGas=h(t.maxFeePerGas)),void 0!==t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=h(t.maxPriorityFeePerGas)),void 0!==t.nonce&&(e.nonce=h(t.nonce)),void 0!==t.to&&(e.to=t.to),void 0!==t.type&&(e.type=bt[t.type]),void 0!==t.value&&(e.value=h(t.value)),e}const gt=ft("transactionRequest",pt),mt={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844"};function yt(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?u(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?u(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?mt[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if("bigint"==typeof e.v){if(0n===e.v||27n===e.v)return 0;if(1n===e.v||28n===e.v)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),"legacy"===e.type&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),"eip2930"===e.type&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),"eip1559"===e.type&&delete e.maxFeePerBlobGas,e}const xt=ft("transaction",yt);function vt(t){var e;const s=null==(e=t.transactions)?void 0:e.map((t=>"string"==typeof t?t:yt(t)));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:s,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const wt=ft("block",vt);function Pt(t){const{kzg:e}=t,s=t.to??("string"==typeof t.blobs[0]?"hex":"bytes"),i="string"==typeof t.blobs[0]?t.blobs.map((t=>l(t))):t.blobs,n=[];for(const o of i)n.push(Uint8Array.from(e.blobToKzgCommitment(o)));return"bytes"===s?n:n.map((t=>c(t)))}function It(t){const{kzg:e}=t,s=t.to??("string"==typeof t.blobs[0]?"hex":"bytes"),i="string"==typeof t.blobs[0]?t.blobs.map((t=>l(t))):t.blobs,n="string"==typeof t.commitments[0]?t.commitments.map((t=>l(t))):t.commitments,o=[];for(let r=0;r<i.length;r++){const t=i[r],s=n[r];o.push(Uint8Array.from(e.computeBlobKzgProof(t,s)))}return"bytes"===s?o:o.map((t=>c(t)))}class Bt extends G{constructor(t,e,s,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=P(this.buffer)}update(t){g(this);const{view:e,buffer:s,blockLen:i}=this,n=(t=B(t)).length;for(let o=0;o<n;){const r=Math.min(i-this.pos,n-o);if(r!==i)s.set(t.subarray(o,o+r),this.pos),this.pos+=r,o+=r,this.pos===i&&(this.process(e,0),this.pos=0);else{const e=P(t);for(;i<=n-o;o+=i)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){g(this),m(t,this),this.finished=!0;const{buffer:e,view:s,blockLen:i,isLE:n}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(s,0),o=0);for(let u=o;u<i;u++)e[u]=0;!function(t,e,s,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,s,i);const n=BigInt(32),o=BigInt(4294967295),r=Number(s>>n&o),a=Number(s&o),c=i?4:0,h=i?0:4;t.setUint32(e+c,r,i),t.setUint32(e+h,a,i)}(s,i-8,BigInt(8*this.length),n),this.process(s,0);const r=P(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)r.setUint32(4*u,h[u],n)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const s=t.slice(0,e);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:s,length:i,finished:n,destroyed:o,pos:r}=this;return t.length=i,t.pos=r,t.finished=n,t.destroyed=o,i%e&&t.buffer.set(s),t}}const Gt=(t,e,s)=>t&e^t&s^e&s,Ut=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lt=new Uint32Array(64);class kt extends Bt{constructor(){super(64,32,8,!1),this.A=0|Ft[0],this.B=0|Ft[1],this.C=0|Ft[2],this.D=0|Ft[3],this.E=0|Ft[4],this.F=0|Ft[5],this.G=0|Ft[6],this.H=0|Ft[7]}get(){const{A:t,B:e,C:s,D:i,E:n,F:o,G:r,H:a}=this;return[t,e,s,i,n,o,r,a]}set(t,e,s,i,n,o,r,a){this.A=0|t,this.B=0|e,this.C=0|s,this.D=0|i,this.E=0|n,this.F=0|o,this.G=0|r,this.H=0|a}process(t,e){for(let l=0;l<16;l++,e+=4)Lt[l]=t.getUint32(e,!1);for(let l=16;l<64;l++){const t=Lt[l-15],e=Lt[l-2],s=I(t,7)^I(t,18)^t>>>3,i=I(e,17)^I(e,19)^e>>>10;Lt[l]=i+Lt[l-7]+s+Lt[l-16]|0}let{A:s,B:i,C:n,D:o,E:r,F:a,G:c,H:h}=this;for(let l=0;l<64;l++){const t=h+(I(r,6)^I(r,11)^I(r,25))+((u=r)&a^~u&c)+Ut[l]+Lt[l]|0,e=(I(s,2)^I(s,13)^I(s,22))+Gt(s,i,n)|0;h=c,c=a,a=r,r=o+t|0,o=n,n=i,i=s,s=t+e|0}var u;s=s+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,r=r+this.E|0,a=a+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(s,i,n,o,r,a,c,h)}roundClean(){Lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Et=U((()=>new kt));function Ot(s,i){const n=i||"hex",o=Et(t(s,{strict:!1})?e(s):s);return"bytes"===n?o:d(o)}function At(t){const{commitment:e,version:s=1}=t,i=t.to??("string"==typeof e?"hex":"bytes"),n=Ot(e,"bytes");return n.set([s],0),"bytes"===i?n:c(n)}function $t(t){const{commitments:e,version:s}=t,i=t.to??("string"==typeof e[0]?"hex":"bytes"),n=[];for(const o of e)n.push(At({commitment:o,to:i,version:s}));return n}const zt=4096,Nt=131072,Rt=761855;class Ct extends s{constructor({maxSize:t,size:e}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${e} bytes`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlobSizeTooLargeError"})}}class Ht extends s{constructor(){super("Blob data must not be empty."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EmptyBlobError"})}}class Vt extends s{constructor({hash:t,size:e}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidVersionedHashSizeError"})}}class jt extends s{constructor({hash:t,version:e}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:["Expected: 1",`Received: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidVersionedHashVersionError"})}}function Tt(t){const e=t.to??("string"==typeof t.data?"hex":"bytes"),s="string"==typeof t.data?l(t.data):t.data,i=n(s);if(!i)throw new Ht;if(i>Rt)throw new Ct({maxSize:Rt,size:i});const o=[];let r=!0,a=0;for(;r;){const t=ot(new Uint8Array(Nt));let e=0;for(;e<zt;){const i=s.slice(a,a+31);if(t.pushByte(0),t.pushBytes(i),i.length<31){t.pushByte(128),r=!1;break}e++,a+=31}o.push(t)}return"bytes"===e?o.map((t=>t.bytes)):o.map((t=>c(t.bytes)))}function Mt(t){const{data:e,kzg:s,to:i}=t,n=t.blobs??Tt({data:e,to:i}),o=t.commitments??Pt({blobs:n,kzg:s,to:i}),r=t.proofs??It({blobs:n,commitments:o,kzg:s,to:i}),a=[];for(let c=0;c<n.length;c++)a.push({blob:n[c],commitment:o[c],proof:r[c]});return a}function St(t){if(t.type)return t.type;if(void 0!==t.blobs||void 0!==t.blobVersionedHashes||void 0!==t.maxFeePerBlobGas||void 0!==t.sidecars)return"eip4844";if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)return"eip1559";if(void 0!==t.gasPrice)return void 0!==t.accessList?"eip2930":"legacy";throw new ht({transaction:t})}function Dt(t,{args:e,eventName:s}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...s?{args:e,eventName:s}:{}}}class _t extends s{constructor({chainId:t}){super("number"==typeof t?`Chain ID "${t}" is invalid.`:"Chain ID is invalid."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidChainIdError"})}}function Kt(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Xt(t,e="hex"){const s=Yt(t),i=ot(new Uint8Array(s.length));return s.encode(i),"hex"===e?c(i.bytes):i.bytes}function Yt(t){return Array.isArray(t)?function(t){const e=t.reduce(((t,e)=>t+e.length),0),s=qt(e);return{length:e<=55?1+e:1+s+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+s),1===s?i.pushUint8(e):2===s?i.pushUint16(e):3===s?i.pushUint24(e):i.pushUint32(e));for(const{encode:e}of t)e(i)}}}(t.map((t=>Yt(t)))):function(t){const e="string"==typeof t?l(t):t,s=qt(e.length),i=1===e.length&&e[0]<128?1:e.length<=55?1+e.length:1+s+e.length;return{length:i,encode(t){1===e.length&&e[0]<128?t.pushBytes(e):e.length<=55?(t.pushByte(128+e.length),t.pushBytes(e)):(t.pushByte(183+s),1===s?t.pushUint8(e.length):2===s?t.pushUint16(e.length):3===s?t.pushUint24(e.length):t.pushUint32(e.length),t.pushBytes(e))}}}(t)}function qt(t){if(t<256)return 1;if(t<65536)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new s("Length is too large.")}const Jt={"0x0":"reverted","0x1":"success"};function Qt(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map((t=>Dt(t))):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?u(t.transactionIndex):null,status:t.status?Jt[t.status]:null,type:t.type?mt[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const Wt=ft("transactionReceipt",Qt);function Zt(t){const{chainId:e,maxPriorityFeePerGas:s,maxFeePerGas:i,to:n}=t;if(e<=0)throw new _t({chainId:e});if(n&&!q(n))throw new S({address:n});if(i&&i>2n**256n-1n)throw new lt({maxFeePerGas:i});if(s&&i&&s>i)throw new dt({maxFeePerGas:i,maxPriorityFeePerGas:s})}function te(t){const{chainId:e,maxPriorityFeePerGas:i,gasPrice:n,maxFeePerGas:o,to:r}=t;if(e<=0)throw new _t({chainId:e});if(r&&!q(r))throw new S({address:r});if(i||o)throw new s("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>2n**256n-1n)throw new lt({maxFeePerGas:n})}function ee(t){const{chainId:e,maxPriorityFeePerGas:i,gasPrice:n,maxFeePerGas:o,to:r,accessList:a}=t;if(r&&!q(r))throw new S({address:r});if(void 0!==e&&e<=0)throw new _t({chainId:e});if(i||o)throw new s("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>2n**256n-1n)throw new lt({maxFeePerGas:n});if(a)throw new s("`accessList` is not a valid Legacy Transaction attribute.")}function se(t){if(!t||0===t.length)return[];const e=[];for(let s=0;s<t.length;s++){const{address:i,storageKeys:n}=t[s];for(let t=0;t<n.length;t++)if(n[t].length-2!=64)throw new ut({storageKey:n[t]});if(!q(i,{strict:!1}))throw new S({address:i});e.push([i,n])}return e}function ie(t,e){const s=St(t);return"eip1559"===s?function(t,e){const{chainId:s,gas:i,nonce:n,to:o,value:r,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:h,data:u}=t;Zt(t);const l=se(h),f=[d(s),n?d(n):"0x",c?d(c):"0x",a?d(a):"0x",i?d(i):"0x",o??"0x",r?d(r):"0x",u??"0x",l,...ne(t,e)];return J(["0x02",Xt(f)])}(t,e):"eip2930"===s?function(t,e){const{chainId:s,gas:i,data:n,nonce:o,to:r,value:a,accessList:c,gasPrice:h}=t;te(t);const u=se(c),l=[d(s),o?d(o):"0x",h?d(h):"0x",i?d(i):"0x",r??"0x",a?d(a):"0x",n??"0x",u,...ne(t,e)];return J(["0x01",Xt(l)])}(t,e):"eip4844"===s?function(t,e){const{chainId:s,gas:i,nonce:o,to:r,value:a,maxFeePerBlobGas:h,maxFeePerGas:l,maxPriorityFeePerGas:f,accessList:b,data:p}=t;!function(t){const{blobVersionedHashes:e}=t;if(e){if(0===e.length)throw new Ht;for(const t of e){const e=n(t),s=u(Q(t,0,1));if(32!==e)throw new Vt({hash:t,size:e});if(1!==s)throw new jt({hash:t,version:s})}}Zt(t)}(t);let g=t.blobVersionedHashes,m=t.sidecars;if(t.blobs&&(void 0===g||void 0===m)){const e="string"==typeof t.blobs[0]?t.blobs:t.blobs.map((t=>c(t))),s=t.kzg,i=Pt({blobs:e,kzg:s});if(void 0===g&&(g=$t({commitments:i})),void 0===m){m=Mt({blobs:e,commitments:i,proofs:It({blobs:e,commitments:i,kzg:s})})}}const y=se(b),x=[d(s),o?d(o):"0x",f?d(f):"0x",l?d(l):"0x",i?d(i):"0x",r??"0x",a?d(a):"0x",p??"0x",y,h?d(h):"0x",g??[],...ne(t,e)],v=[],w=[],P=[];if(m)for(let n=0;n<m.length;n++){const{blob:t,commitment:e,proof:s}=m[n];v.push(t),w.push(e),P.push(s)}return J(["0x03",Xt(m?[x,v,w,P]:x)])}(t,e):function(t,e){const{chainId:s=0,gas:i,data:n,nonce:o,to:r,value:a,gasPrice:c}=t;ee(t);let h=[o?d(o):"0x",c?d(c):"0x",i?d(i):"0x",r??"0x",a?d(a):"0x",n??"0x"];if(e){const t=(()=>{if(e.v>=35n){return(e.v-35n)/2n>0?e.v:27n+(35n===e.v?0n:1n)}if(s>0)return BigInt(2*s)+BigInt(35n+e.v-27n);const t=27n+(27n===e.v?0n:1n);if(e.v!==t)throw new ct({v:e.v});return t})();h=[...h,d(t),e.r,e.s]}else s>0&&(h=[...h,d(s),"0x","0x"]);return Xt(h)}(t,e)}function ne(t,e){const{r:s,s:i,v:n,yParity:o}=e??t;if(void 0===s)return[];if(void 0===i)return[];if(void 0===n&&void 0===o)return[];return["number"==typeof o?o?d(1):"0x":0n===n?"0x":1n===n?d(1):27n===n?"0x":d(1),f(s),f(i)]}const oe=65535n;export{Tt as A,J as B,Kt as C,rt as D,K as E,lt as F,q as G,M as H,_t as I,Ot as J,se as K,ie as L,Q as M,Z as N,tt as O,ne as P,dt as T,S as a,ct as b,ht as c,ut as d,wt as e,vt as f,Dt as g,xt as h,yt as i,Wt as j,Qt as k,gt as l,oe as m,pt as n,St as o,Xt as p,Zt as q,bt as r,te as s,mt as t,ee as u,Pt as v,At as w,$t as x,It as y,Mt as z};
